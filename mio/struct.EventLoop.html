<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `EventLoop` struct in crate `mio`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, EventLoop">

    <title>mio::EventLoop - Rust</title>

    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        
        <p class='location'><a href='index.html'>mio</a></p><div class='block mod'><h2>Modules</h2><a class='mod ' href='buf/index.html' title=''>buf</a><a class='mod ' href='net/index.html' title='Networking primitives '>net</a><a class='mod ' href='util/index.html' title='Utilities for non-blocking IO programs'>util</a></div><div class='block struct'><h2>Structs</h2><a class='struct current' href='struct.EventLoop.html' title='Single threaded IO event loop.'>EventLoop</a><a class='struct ' href='struct.EventLoopConfig.html' title='Configure EventLoop runtime details'>EventLoopConfig</a><a class='struct ' href='struct.EventLoopSender.html' title='Sends messages to the EventLoop from other threads.'>EventLoopSender</a><a class='struct ' href='struct.Interest.html' title=''>Interest</a><a class='struct ' href='struct.IoDesc.html' title='Represents the OS&#39;s handle to the IO instance. In this case, it is the file descriptor.'>IoDesc</a><a class='struct ' href='struct.MioError.html' title=''>MioError</a><a class='struct ' href='struct.PipeReader.html' title=''>PipeReader</a><a class='struct ' href='struct.PipeWriter.html' title=''>PipeWriter</a><a class='struct ' href='struct.Poll.html' title=''>Poll</a><a class='struct ' href='struct.PollOpt.html' title=''>PollOpt</a><a class='struct ' href='struct.ReadHint.html' title=''>ReadHint</a><a class='struct ' href='struct.Timeout.html' title=''>Timeout</a><a class='struct ' href='struct.TimerError.html' title=''>TimerError</a><a class='struct ' href='struct.Token.html' title=''>Token</a></div><div class='block enum'><h2>Enums</h2><a class='enum ' href='enum.MioErrorKind.html' title=''>MioErrorKind</a><a class='enum ' href='enum.NonBlock.html' title='The result of a non-blocking operation.'>NonBlock</a></div><div class='block trait'><h2>Traits</h2><a class='trait ' href='trait.Buf.html' title='A trait for values that provide sequential read access to bytes.'>Buf</a><a class='trait ' href='trait.FromIoDesc.html' title=''>FromIoDesc</a><a class='trait ' href='trait.Handler.html' title=''>Handler</a><a class='trait ' href='trait.IoAcceptor.html' title=''>IoAcceptor</a><a class='trait ' href='trait.IoHandle.html' title=''>IoHandle</a><a class='trait ' href='trait.IoReader.html' title=''>IoReader</a><a class='trait ' href='trait.IoWriter.html' title=''>IoWriter</a><a class='trait ' href='trait.MutBuf.html' title='A trait for values that provide sequential write access to bytes.'>MutBuf</a></div><div class='block fn'><h2>Functions</h2><a class='fn ' href='fn.pipe.html' title=''>pipe</a></div>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press 'S' to search, '?' for more options..."
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>mio</a>::<wbr><a class='struct' href=''>EventLoop</a><wbr></span><span class='out-of-band'><span id='render-detail'>
            <a id="collapse-all" href="#">[-]
            </a>&nbsp;<a id="expand-all" href="#">[+]</a>
        </span><a id='src-6158' href='../src/mio/event_loop.rs.html#43-49'>[src]</a></span></h1>
<pre class='rust struct'>pub struct EventLoop&lt;T, M: <a class='trait' href='http://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a>&gt; {
    // some fields omitted
}</pre><div class='docblock'><p>Single threaded IO event loop.</p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><a class='stability Unmarked' title='No stability level'></a><code>impl&lt;T, M: <a class='trait' href='http://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a>&gt; <a class='struct' href='../mio/struct.EventLoop.html' title='mio::EventLoop'>EventLoop</a>&lt;T, M&gt;</code></h3><div class='impl-items'><h4 id='method.new' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.new' class='fnname'>new</a>() -&gt; <a class='type' href='../mio/type.MioResult.html' title='mio::MioResult'>MioResult</a>&lt;<a class='struct' href='../mio/struct.EventLoop.html' title='mio::EventLoop'>EventLoop</a>&lt;T, M&gt;&gt;</code></h4>
<div class='docblock'><p>Initializes a new event loop using default configuration settings. The
event loop will not be running yet.</p>
</div><h4 id='method.configured' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.configured' class='fnname'>configured</a>(config: <a class='struct' href='../mio/struct.EventLoopConfig.html' title='mio::EventLoopConfig'>EventLoopConfig</a>) -&gt; <a class='type' href='../mio/type.MioResult.html' title='mio::MioResult'>MioResult</a>&lt;<a class='struct' href='../mio/struct.EventLoop.html' title='mio::EventLoop'>EventLoop</a>&lt;T, M&gt;&gt;</code></h4>
<h4 id='method.channel' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.channel' class='fnname'>channel</a>(&amp;self) -&gt; <a class='struct' href='../mio/struct.EventLoopSender.html' title='mio::EventLoopSender'>EventLoopSender</a>&lt;M&gt;</code></h4>
<div class='docblock'><p>Returns a sender that allows sending messages to the event loop in a
thread-safe way, waking up the event loop if needed.</p>

<h1 id="example" class='section-header'><a
                           href="#example">Example</a></h1><pre id='rust-example-rendered' class='rust '>
<span class='attribute'>#<span class='op'>!</span>[<span class='ident'>allow</span>(<span class='ident'>unstable</span>)]</span>

<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>thread</span>::<span class='ident'>Thread</span>;
<span class='kw'>use</span> <span class='ident'>mio</span>::{<span class='ident'>EventLoop</span>, <span class='ident'>Handler</span>};

<span class='kw'>struct</span> <span class='ident'>MyHandler</span>;

<span class='kw'>impl</span> <span class='ident'>Handler</span><span class='op'>&lt;</span>(), <span class='ident'>u32</span><span class='op'>&gt;</span> <span class='kw'>for</span> <span class='ident'>MyHandler</span> {
    <span class='kw'>fn</span> <span class='ident'>notify</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>event_loop</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>EventLoop</span><span class='op'>&lt;</span>(), <span class='ident'>u32</span><span class='op'>&gt;</span>, <span class='ident'>msg</span>: <span class='ident'>u32</span>) {
        <span class='macro'>assert_eq</span><span class='macro'>!</span>(<span class='ident'>msg</span>, <span class='number'>123</span>);
        <span class='ident'>event_loop</span>.<span class='ident'>shutdown</span>();
    }
}

<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>event_loop</span> <span class='op'>=</span> <span class='ident'>EventLoop</span>::<span class='ident'>new</span>().<span class='ident'>unwrap</span>();
<span class='kw'>let</span> <span class='ident'>sender</span> <span class='op'>=</span> <span class='ident'>event_loop</span>.<span class='ident'>channel</span>();

<span class='comment'>// Send the notification from another thread</span>
<span class='ident'>Thread</span>::<span class='ident'>spawn</span>(<span class='kw'>move</span> <span class='op'>||</span> {
    <span class='kw'>let</span> _ <span class='op'>=</span> <span class='ident'>sender</span>.<span class='ident'>send</span>(<span class='number'>123</span>);
});

<span class='kw'>let</span> _ <span class='op'>=</span> <span class='ident'>event_loop</span>.<span class='ident'>run</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>MyHandler</span>);
</pre>

<h1 id="implementation-details" class='section-header'><a
                           href="#implementation-details">Implementation Details</a></h1>
<p>Each <a href="#">EventLoop</a> contains a lock-free queue with a pre-allocated
buffer size. The size can be changed by modifying
<a href="struct.EventLoopConfig.html#structfield.notify_capacity">EventLoopConfig.notify_capacity</a>.
When a message is sent to the EventLoop, it is first pushed on to the
queue. Then, if the EventLoop is currently running, an atomic flag is
set to indicate that the next loop iteration should be started without
waiting.</p>

<p>If the loop is blocked waiting for IO events, then it is woken up. The
strategy for waking up the event loop is platform dependent. For
example, on a modern Linux OS, eventfd is used. On older OSes, a pipe
is used.</p>

<p>The strategy of setting an atomic flag if the event loop is not already
sleeping allows avoiding an expensive wakeup operation if at all possible.</p>
</div><h4 id='method.timeout' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.timeout' class='fnname'>timeout</a>(&amp;mut self, token: T, delay: <a class='struct' href='http://doc.rust-lang.org/nightly/std/time/duration/struct.Duration.html' title='std::time::duration::Duration'>Duration</a>) -&gt; <a class='type' href='../mio/type.TimerResult.html' title='mio::TimerResult'>TimerResult</a>&lt;<a class='struct' href='../mio/struct.Timeout.html' title='mio::Timeout'>Timeout</a>&gt;</code></h4>
<div class='docblock'><p>Schedules a timeout after the requested time interval. When the
duration has been reached,
<a href="trait.Handler.html#method.timeout">Handler::timeout</a> will be invoked
passing in the supplied token.</p>

<p>Returns a handle to the timeout that can be used to cancel the timeout
using <a href="#method.clear_timeout">#clear_timeout</a>.</p>

<h1 id="example" class='section-header'><a
                           href="#example">Example</a></h1><pre id='rust-example-rendered' class='rust '>
<span class='attribute'>#<span class='op'>!</span>[<span class='ident'>allow</span>(<span class='ident'>unstable</span>)]</span>

<span class='kw'>use</span> <span class='ident'>mio</span>::{<span class='ident'>EventLoop</span>, <span class='ident'>Handler</span>};
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>time</span>::<span class='ident'>Duration</span>;

<span class='kw'>struct</span> <span class='ident'>MyHandler</span>;

<span class='kw'>impl</span> <span class='ident'>Handler</span><span class='op'>&lt;</span><span class='ident'>u32</span>, ()<span class='op'>&gt;</span> <span class='kw'>for</span> <span class='ident'>MyHandler</span> {
    <span class='kw'>fn</span> <span class='ident'>timeout</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>event_loop</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>EventLoop</span><span class='op'>&lt;</span><span class='ident'>u32</span>, ()<span class='op'>&gt;</span>, <span class='ident'>timeout</span>: <span class='ident'>u32</span>) {
        <span class='macro'>assert_eq</span><span class='macro'>!</span>(<span class='ident'>timeout</span>, <span class='number'>123</span>);
        <span class='ident'>event_loop</span>.<span class='ident'>shutdown</span>();
    }
}


<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>event_loop</span> <span class='op'>=</span> <span class='ident'>EventLoop</span>::<span class='ident'>new</span>().<span class='ident'>unwrap</span>();
<span class='kw'>let</span> <span class='ident'>timeout</span> <span class='op'>=</span> <span class='ident'>event_loop</span>.<span class='ident'>timeout</span>(<span class='number'>123</span>, <span class='ident'>Duration</span>::<span class='ident'>milliseconds</span>(<span class='number'>300</span>)).<span class='ident'>unwrap</span>();
<span class='kw'>let</span> _ <span class='op'>=</span> <span class='ident'>event_loop</span>.<span class='ident'>run</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>MyHandler</span>);
</pre>
</div><h4 id='method.clear_timeout' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.clear_timeout' class='fnname'>clear_timeout</a>(&amp;mut self, timeout: <a class='struct' href='../mio/struct.Timeout.html' title='mio::Timeout'>Timeout</a>) -&gt; <a href='http://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></h4>
<div class='docblock'><p>If the supplied timeout has not been triggered, cancel it such that it
will not be triggered in the future.</p>
</div><h4 id='method.shutdown' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.shutdown' class='fnname'>shutdown</a>(&amp;mut self)</code></h4>
<div class='docblock'><p>Tells the event loop to exit after it is done handling all events in the
current iteration.</p>
</div><h4 id='method.register' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.register' class='fnname'>register</a>&lt;H: <a class='trait' href='../mio/trait.IoHandle.html' title='mio::IoHandle'>IoHandle</a>&gt;(&amp;mut self, io: &amp;H, token: <a class='struct' href='../mio/struct.Token.html' title='mio::Token'>Token</a>) -&gt; <a class='type' href='../mio/type.MioResult.html' title='mio::MioResult'>MioResult</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Registers an IO handle with the event loop.</p>
</div><h4 id='method.register_opt' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.register_opt' class='fnname'>register_opt</a>&lt;H: <a class='trait' href='../mio/trait.IoHandle.html' title='mio::IoHandle'>IoHandle</a>&gt;(&amp;mut self, io: &amp;H, token: <a class='struct' href='../mio/struct.Token.html' title='mio::Token'>Token</a>, interest: <a class='struct' href='../mio/struct.Interest.html' title='mio::Interest'>Interest</a>, opt: <a class='struct' href='../mio/struct.PollOpt.html' title='mio::PollOpt'>PollOpt</a>) -&gt; <a class='type' href='../mio/type.MioResult.html' title='mio::MioResult'>MioResult</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Registers an IO handle with the event loop.</p>
</div><h4 id='method.reregister' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.reregister' class='fnname'>reregister</a>&lt;H: <a class='trait' href='../mio/trait.IoHandle.html' title='mio::IoHandle'>IoHandle</a>&gt;(&amp;mut self, io: &amp;H, token: <a class='struct' href='../mio/struct.Token.html' title='mio::Token'>Token</a>, interest: <a class='struct' href='../mio/struct.Interest.html' title='mio::Interest'>Interest</a>, opt: <a class='struct' href='../mio/struct.PollOpt.html' title='mio::PollOpt'>PollOpt</a>) -&gt; <a class='type' href='../mio/type.MioResult.html' title='mio::MioResult'>MioResult</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Re-Registers an IO handle with the event loop.</p>
</div><h4 id='method.run' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.run' class='fnname'>run</a>&lt;H: <a class='trait' href='../mio/trait.Handler.html' title='mio::Handler'>Handler</a>&lt;T, M&gt;&gt;(&amp;mut self, handler: &amp;mut H) -&gt; <a class='type' href='../mio/type.MioResult.html' title='mio::MioResult'>MioResult</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Keep spinning the event loop indefinitely, and notify the handler whenever
any of the registered handles are ready.</p>
</div><h4 id='method.deregister' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.deregister' class='fnname'>deregister</a>&lt;H: <a class='trait' href='../mio/trait.IoHandle.html' title='mio::IoHandle'>IoHandle</a>&gt;(&amp;mut self, io: &amp;H) -&gt; <a class='type' href='../mio/type.MioResult.html' title='mio::MioResult'>MioResult</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Deregisters an IO handle with the event loop.</p>
</div><h4 id='method.run_once' class='method'><a class='stability Unmarked' title='No stability level'></a><code>fn <a href='#method.run_once' class='fnname'>run_once</a>&lt;H: <a class='trait' href='../mio/trait.Handler.html' title='mio::Handler'>Handler</a>&lt;T, M&gt;&gt;(&amp;mut self, handler: &amp;mut H) -&gt; <a class='type' href='../mio/type.MioResult.html' title='mio::MioResult'>MioResult</a>&lt;<a href='http://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Spin the event loop once, with a timeout of one second, and notify the
handler if any of the registered handles become ready during that
time.</p>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><a class='stability Unstable' title='Unstable: will be overhauled with new lifetime rules; see RFC 458'></a><code>impl&lt;T, M: <a class='trait' href='http://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a>&gt; <a class='trait' href='http://doc.rust-lang.org/nightly/core/marker/trait.Sync.html' title='core::marker::Sync'>Sync</a> for <a class='struct' href='../mio/struct.EventLoop.html' title='mio::EventLoop'>EventLoop</a>&lt;T, M&gt;</code></h3><div class='impl-items'></div><h3 id='derived_implementations'>Derived Implementations </h3><h3 class='impl'><a class='stability Stable' title='Stable'></a><code>impl&lt;T: <a class='trait' href='http://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html' title='core::fmt::Debug'>Debug</a>, M: <a class='trait' href='http://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html' title='core::fmt::Debug'>Debug</a> + <a class='trait' href='http://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a>&gt; <a class='trait' href='http://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html' title='core::fmt::Debug'>Debug</a> for <a class='struct' href='../mio/struct.EventLoop.html' title='mio::EventLoop'>EventLoop</a>&lt;T, M&gt;</code></h3><div class='impl-items'><h4 id='method.fmt' class='method'><a class='stability Stable' title='Stable'></a><code>fn <a href='#method.fmt' class='fnname'>fmt</a>(&amp;self, __arg_0: &amp;mut <a class='struct' href='http://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html' title='core::fmt::Formatter'>Formatter</a>) -&gt; <a class='type' href='http://doc.rust-lang.org/nightly/core/fmt/type.Result.html' title='core::fmt::Result'>Result</a></code></h4>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div class="shortcuts">
            <h1>Keyboard shortcuts</h1>
            <dl>
                <dt>?</dt>
                <dd>Show this help dialog</dd>
                <dt>S</dt>
                <dd>Focus the search field</dd>
                <dt>&larrb;</dt>
                <dd>Move up in search results</dd>
                <dt>&rarrb;</dt>
                <dd>Move down in search results</dd>
                <dt>&#9166;</dt>
                <dd>Go to active search result</dd>
            </dl>
        </div>
        <div class="infos">
            <h1>Search tricks</h1>
            <p>
                Prefix searches with a type followed by a colon (e.g.
                <code>fn:</code>) to restrict the search to a given type.
            </p>
            <p>
                Accepted types are: <code>fn</code>, <code>mod</code>,
                <code>struct</code>, <code>enum</code>,
                <code>trait</code>, <code>typedef</code> (or
                <code>tdef</code>).
            </p>
        </div>
    </div>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "mio";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script async src="../search-index.js"></script>
</body>
</html>